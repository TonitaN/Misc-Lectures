\input{preamble.tex}
\begin{tikzpicture}[
level 0/.style = {sibling distance = 8em,level distance = 4em},
level 0/.style = {sibling distance = 8em,level distance = 3em},
level 1/.style = {sibling distance = 6em,level distance = 5em},
level 2/.style = {sibling distance = 10em,level distance = 7em},
level 3/.style = {sibling distance = 6em,level distance = 6em},
level 4/.style = {sibling distance = 12em,level distance = 15em},
level 5/.style = {sibling distance = 6em,level distance = 8em},
level 6/.style = {sibling distance = 8em,level distance = 7em},
]

\input{styles.tex}
\node (0B1) [chosenequation]{\nodepart{one}$\mathbf{Y}A_{0}\mathbf{X} = \mathbf{X}B_{0}\mathbf{Y}$\nodepart{two}$\begin{array}{l}\mathrm{No\;constraints}\\\mathrm{No\;conditions}\\\end{array}$}
child {node [action]{$\begin{array}{c}\mathtt{PairComp}\\A_{0}\;B_{0}\end{array}$} edge from parent [draw opacity = 0]
child {node (2B1) [chosenequation]{\nodepart{one}$\mathbf{Y}A_{0}\mathbf{X} = \mathbf{X}B_{0}\mathbf{Y}$\nodepart{two}$\begin{array}{l}\mathbf{X}\neq{}B_{0}\mathbf{X_{S}}\\\mathbf{X}\neq{}\mathbf{X_{P}}A_{0}\\\mathrm{No\;conditions}\\\end{array}$}edge from parent [draw opacity = 0]
}
child {node (2B2) [fullequation]{\nodepart{one}$\mathbf{Y}A_{1}\mathbf{X}A_{0} = B_{0}\mathbf{X}A_{1}\mathbf{Y}$\nodepart{two}$\begin{array}{l}\mathrm{No\;constraints}\\A_{1}:=A_{0}B_{0}\end{array}$}edge from parent [draw opacity = 0]
}
child {node (2B3) [fullequation]{\nodepart{one}$\mathbf{Y}A_{1}\mathbf{X} = B_{0}\mathbf{X}B_{0}\mathbf{Y}$\nodepart{two}$\begin{array}{l}\mathbf{X}\neq{}\mathbf{X_{P}}A_{0}\\A_{1}:=A_{0}B_{0}\end{array}$}edge from parent [draw opacity = 0]
}
child {node (2B4) [fullequation]{\nodepart{one}$\mathbf{Y}A_{0}\mathbf{X}A_{0} = \mathbf{X}A_{1}\mathbf{Y}$\nodepart{two}$\begin{array}{l}\mathbf{X}\neq{}B_{0}\mathbf{X_{S}}\\A_{1}:=A_{0}B_{0}\end{array}$}edge from parent [draw opacity = 0]
}
child {node [eqset,inner sep=-2em,cloud puffs=60,aspect=5,fit=(2B1)(2B2)(2B3)(2B4)] {}
child {node [action]{$\begin{array}{c}\mathtt{BlockComp}\\A_{0}\end{array}$} edge from parent [draw opacity = 0]
child {node (4B1) [fullequation]{\nodepart{one}$A_{1} = B_{0}A_{2}$\nodepart{two}$\begin{array}{l}\mathrm{No\;constraints}\\A_{1}:=A_{0}^{i_{1}+1}\;A_{2}:=A_{0}^{i_{1}}\end{array}$}edge from parent [draw opacity = 0]
}
child {node (4B2) [chosenequation]{\nodepart{one}$A_{2}\mathbf{X} = A_{3}\mathbf{X}B_{0}A_{4}$\nodepart{two}$\begin{array}{l}\mathbf{X}\neq\varepsilon\\\mathbf{X}\neq{}A_{2}\mathbf{X_{S}}\\\mathbf{X}\neq{}\mathbf{X_{P}}A_{2}\\A_{2}:=A_{0}^{i_{1}+i_{2}+1}\\A_{3}:=A_{0}^{i_{2}}\;A_{4}:=A_{0}^{i_{1}}\end{array}$}edge from parent [draw opacity = 0]
}
child {node (4B3) [fullequation]{\nodepart{one}$A_{2}\mathbf{Y}A_{3} = B_{0}A_{2}\mathbf{Y}A_{4}$\nodepart{two}$\begin{array}{l}\mathbf{Y}\neq\varepsilon\\\mathbf{Y}\neq{}A_{3}\mathbf{Y_{S}}\\\mathbf{Y}\neq{}\mathbf{Y_{P}}A_{3}\\A_{2}:=A_{0}^{i_{1}}\;A_{3}:=A_{0}^{i_{2}+1}\\A_{4}:=A_{0}^{i_{2}}\end{array}$}edge from parent [draw opacity = 0]
}
child {node (4B4) [fullequation]{\nodepart{one}$A_{2}\mathbf{Y}A_{3}\mathbf{X} = A_{4}\mathbf{X}B_{0}A_{2}\mathbf{Y}A_{5}$\nodepart{two}$\begin{array}{l}\mathbf{Y}\neq\varepsilon\\\mathbf{X}\neq\varepsilon\\\mathbf{X}\neq{}A_{3}\mathbf{X_{S}}\\\mathbf{X}\neq{}\mathbf{X_{P}}A_{3}\\\mathbf{Y}\neq{}A_{3}\mathbf{Y_{S}}\\\mathbf{Y}\neq{}\mathbf{Y_{P}}A_{3}\\A_{2}:=A_{0}^{i_{3}}\;A_{3}:=A_{0}^{i_{1}+i_{4}+1}\\A_{4}:=A_{0}^{i_{1}}\;A_{5}:=A_{0}^{i_{4}}\end{array}$}edge from parent [draw opacity = 0]
}
child {node [eqset,inner sep=-2em,cloud puffs=60,aspect=5,fit=(4B1)(4B2)(4B3)(4B4)] {}
child {node [action]{$\begin{array}{c}i_{1}:=0\end{array}$} edge from parent [draw opacity = 0]
child {node (6B1) [chosenequation]{\nodepart{one}$A_{2}\mathbf{X} = \mathbf{X}A_{3}B_{0}$\nodepart{two}$\begin{array}{l}\mathbf{X}\neq\varepsilon\\\mathbf{X}\neq{}A_{2}\mathbf{X_{S}}\\\mathbf{X}\neq{}\mathbf{X_{P}}A_{2}\\A_{2}:=A_{0}^{i_{2}+1}\;A_{3}:=A_{0}^{i_{2}}\end{array}$}edge from parent [draw opacity = 0]};};};};};};
\input{postfix.tex}
